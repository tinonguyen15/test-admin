<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Admin - Qu·∫£n l√Ω s·∫£n ph·∫©m</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- CropperJS -->
    <link
      href="https://unpkg.com/cropperjs@1.5.13/dist/cropper.min.css"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/cropperjs@1.5.13/dist/cropper.min.js"></script>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="/css/admin.css" />
    <link rel="stylesheet" href="/css/admin-popup-editProduct.css" />
    <link rel="stylesheet" href="/css/admin.responsive.css" />
  </head>
  <body>
    <aside>
      <h2>Qu·∫£n tr·ªã</h2>
      <ul>
        <li>
          <button class="tab-btn active" data-target="dashboard-section">
            B·∫£ng th·ªëng k√™
          </button>
        </li>
        <li>
          <button class="tab-btn" data-target="setting-section">
            C√†i ƒë·∫∑t chung
          </button>
        </li>
        <li>
          <button class="tab-btn" data-target="physical-section">
            S·∫£n ph·∫©m - th√¥ng th∆∞·ªùng
          </button>
        </li>
        <li>
          <button class="tab-btn" data-target="digital-section">
            S·∫£n ph·∫©m - m·ªü r·ªông
          </button>
        </li>
      </ul>
    </aside>

    <main>
      <!-- Dashboard Section -->
      <section id="dashboard-section" class="section active">
        <div class="all-chart">
          <div class="chart-container">
            <h3>Th·ªëng k√™ theo lo·∫°i s·∫£n ph·∫©m</h3>
            <canvas id="typeChartCanvas"></canvas>
          </div>
          <div class="chart-container">
            <h3>Th·ªëng k√™ theo tr·∫°ng th√°i s·∫£n ph·∫©m</h3>
            <canvas id="statusChartCanvas"></canvas>
          </div>
        </div>
      </section>

      <!-- C√†i ƒë·∫∑t chung -->
      <section id="setting-section" class="section">
        <h2>C√†i ƒë·∫∑t giao di·ªán</h2>
        <form
          id="configForm"
          enctype="multipart/form-data"
          method="POST"
          action="/api/site-config"
        >
          <!-- Logo -->
          <label>Logo:</label>
          <div class="image-upload-wrapper">
            <button
              type="button"
              class="selectImageBtn"
              data-target="logoInput"
            >
              üì§ Ch·ªçn ·∫£nh
            </button>
            <input
              type="file"
              id="logoInput"
              name="logo"
              accept="image/*"
              style="display: none"
            />
            <img
              id="logoPreview"
              style="max-width: 200px; display: none; margin-top: 8px"
            />
          </div>

          <!-- Banner -->
          <label>Banner:</label>
          <div class="image-upload-wrapper">
            <button
              type="button"
              class="selectImageBtn"
              data-target="bannerInput"
            >
              üì§ Ch·ªçn ·∫£nh
            </button>
            <input
              type="file"
              id="bannerInput"
              name="banner"
              accept="image/*"
              style="display: none"
            />
            <img
              id="bannerPreview"
              style="max-width: 100%; display: none; margin-top: 8px"
            />
          </div>

          <label
            >Hotline:
            <input
              type="text"
              name="hotline"
              placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i" /></label
          ><br />
          <label
            >Facebook:
            <input
              type="url"
              name="facebook"
              placeholder="Nh·∫≠p Link Page Facebook" /></label
          ><br />
          <label
            >TikTok:
            <input
              type="url"
              name="tiktok"
              placeholder="Nh·∫≠p Link k√™nh Tiktok" /></label
          ><br />
          <button type="submit">L∆∞u</button>
        </form>
      </section>

      <!-- S·∫£n ph·∫©m th∆∞·ªùng -->
      <section id="physical-section" class="section">
        <div class="add-product">
          <h2>S·∫£n ph·∫©m th∆∞·ªùng</h2>
          <button id="showPhysicalForm" class="add-btn">
            ‚ûï Th√™m s·∫£n ph·∫©m
          </button>
        </div>

        <div id="physicalFormContainer" style="display: none">
          <form id="physical-form" enctype="multipart/form-data">
            <label>·∫¢nh ch√≠nh cho s·∫£n ph·∫©m:</label>
            <div class="image-upload-product">
              <div class="btn-upload-image-product">
                <button
                  type="button"
                  class="selectImageBtn"
                  data-target="physicalImageInput"
                >
                  üì§ Ch·ªçn ·∫£nh
                </button>
                <input
                  type="file"
                  id="physicalImageInput"
                  name="image"
                  accept="image/*"
                  style="display: none"
                  required
                />
              </div>
              <img
                id="physicalImagePreview"
                style="max-width: 200px; display: none; margin-top: 8px"
              />
            </div>

            <div class="name-status">
              <label
                >T√™n s·∫£n ph·∫©m:
                <input type="text" name="name" required />
              </label>

              <label
                >Tr·∫°ng th√°i:
                <select name="status" required>
                  <option value="con-hang">C√≤n h√†ng</option>
                  <option value="het-hang">H·∫øt h√†ng</option>
                  <option value="sap-ra-mat">S·∫Øp ra m·∫Øt</option>
                </select>
              </label>
            </div>

            <div class="variant-group">
              <label>
                T√™n bi·∫øn th·ªÉ:
                <input
                  type="text"
                  id="variantGroupName"
                  name="variantGroup"
                  placeholder="VD: Size, M√†u..."
                  required
                />
              </label>

              <div id="variantList" class="variant-list"></div>

              <button type="button" id="addVariant">+ Th√™m bi·∫øn th·ªÉ</button>
            </div>

            <button type="submit">
              <i class="fas fa-plus-circle"></i> Xong
            </button>
          </form>
        </div>

        <h2>Danh s√°ch s·∫£n ph·∫©m</h2>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>STT</th>
                <th>T√™n</th>
                <th>(Size/Gi√°)</th>
                <th>·∫¢nh</th>
                <th>Tr·∫°ng th√°i</th>
                <th>H√†nh ƒë·ªông</th>
              </tr>
            </thead>
            <tbody id="physicalTableBody"></tbody>
          </table>
        </div>
      </section>

      <!-- S·∫£n ph·∫©m m·ªü r·ªông -->
      <section id="digital-section" class="section">
        <div class="add-product">
          <h2>S·∫£n ph·∫©m m·ªü r·ªông</h2>
          <button id="showDigitalForm" class="add-btn">‚ûï Th√™m s·∫£n ph·∫©m</button>
        </div>

        <div id="digitalFormContainer" style="display: none">
          <form id="digital-form" enctype="multipart/form-data">
            <label>·∫¢nh ch√≠nh cho s·∫£n ph·∫©m:</label>
            <div class="image-upload-product">
              <div class="btn-upload-image-product">
                <button
                  type="button"
                  class="selectImageBtn"
                  data-target="digitalImageInput"
                >
                  üì§ Ch·ªçn ·∫£nh
                </button>
                <input
                  type="file"
                  id="digitalImageInput"
                  name="image"
                  accept="image/*"
                  style="display: none"
                  required
                />
              </div>
              <img
                id="digitalImagePreview"
                style="max-width: 200px; display: none; margin-top: 8px"
              />
            </div>

            <label
              >T√™n s·∫£n ph·∫©m:
              <input type="text" name="name" required />
            </label>

            <label
              >Tr·∫°ng th√°i:
              <select name="status" required>
                <option value="con-hang">C√≤n h√†ng</option>
                <option value="het-hang">H·∫øt h√†ng</option>
                <option value="sap-ra-mat">S·∫Øp ra m·∫Øt</option>
              </select>
            </label>

            <div id="durationList" class="duration-list"></div>
            <button type="button" id="addDuration">+ Th√™m Options</button>
            <button type="submit">
              <i class="fas fa-plus-circle"></i> Xong
            </button>
          </form>
        </div>

        <h2>Danh s√°ch s·∫£n ph·∫©m</h2>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>STT</th>
                <th>T√™n</th>
                <th>Options - nh√°nh - Gi√°</th>
                <th>·∫¢nh</th>
                <th>Tr·∫°ng th√°i</th>
                <th>H√†nh ƒë·ªông</th>
              </tr>
            </thead>
            <tbody id="digitalTableBody"></tbody>
          </table>
        </div>
      </section>
    </main>

    <!-- üì¶ Popup ch·ªânh s·ª≠a s·∫£n ph·∫©m -->
    <div class="popup-overlay" id="editPopup">
      <form class="popup" onsubmit="event.preventDefault(); saveEdit()">
        <!-- ‚úñÔ∏è N√∫t ƒë√≥ng popup -->
        <span class="close-popup" onclick="closePopup()">&times;</span>
        <h3 class="popup-title">Ch·ªânh s·ª≠a s·∫£n ph·∫©m</h3>

        <!-- üß© Th√¥ng tin chung -->
        <div class="popup-group group-general">
          <label class="form-label">
            STT:
            <input type="number" id="editStt" class="form-input" />
          </label>

          <label class="form-label">
            T√™n s·∫£n ph·∫©m:
            <input type="text" id="editName" class="form-input" />
          </label>

          <!-- ·∫¢nh s·∫£n ph·∫©m -->
          <label class="form-label">
            ·∫¢nh:
            <div class="image-upload-product">
              <div class="btn-upload-image-product">
                <button
                  type="button"
                  class="selectImageBtn"
                  data-target="editImage"
                >
                  üì§ Ch·ªçn ·∫£nh
                </button>
                <input
                  type="file"
                  id="editImage"
                  class="form-input-file"
                  name="image"
                  accept="image/*"
                  style="display: none"
                />
              </div>
              <img
                id="editImagePreview"
                style="
                  max-width: 200px;
                  display: none;
                  margin-top: 8px;
                  border-radius: 8px;
                "
              />
            </div>
          </label>

          <label class="form-label">
            Tr·∫°ng th√°i:
            <select id="editStatus" class="form-select">
              <option value="con-hang">C√≤n h√†ng</option>
              <option value="het-hang">H·∫øt h√†ng</option>
              <option value="sap-ra-mat">S·∫Øp ra m·∫Øt</option>
            </select>
          </label>
        </div>

        <!-- üì¶ N·∫øu l√† s·∫£n ph·∫©m v·∫≠t l√Ω -->
        <div id="editOptions" class="popup-group group-variants">
          <label class="form-label">
            T√™n nh√≥m ph√¢n lo·∫°i:
            <input
              type="text"
              id="editVariantGroupName"
              class="form-input"
              placeholder="VD: Size, M√†u..."
            />
          </label>

          <div id="editVariantList" class="variant-list space-y-2"></div>

          <button id="addEditVariant" type="button" class="add-variant-btn">
            ‚ûï Th√™m ph√¢n lo·∫°i
          </button>
        </div>

        <!-- ‚úÖ N√∫t h√†nh ƒë·ªông -->
        <div class="popup-buttons">
          <button type="submit" class="save btn-primary">L∆∞u</button>
          <button
            type="button"
            class="cancel btn-secondary"
            onclick="closePopup()"
          >
            H·ªßy
          </button>
        </div>
      </form>
    </div>

    <!-- N√∫t 3 g·∫°ch m·ªü menu -->
    <button id="menuToggle"><i class="fas fa-bars"></i></button>

    <!-- Script ch√≠nh kh·ªüi t·∫°o -->
    <script type="module" src="/js/admin/admin.js"></script>
    <script src="/js/admin/sidebar.js"></script>
    <script src="/js/admin/tabs.js"></script>
    <script src="/js/admin/imagePreview.js"></script>
  </body>
</html>
